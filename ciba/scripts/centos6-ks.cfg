text
skipx
install
url --url http://127.0.0.1/centos/6.5/os/x86_64/
repo --name=updates --baseurl=http://127.0.0.1/centos/6.5/os/x86_64/
lang en_US.UTF-8
keyboard us
rootpw Password2014
firewall --disable
authconfig --enableshadow --passalgo=sha512
selinux --disabled
timezone Etc/UTC
%include /tmp/kspre.cfg

services --enabled=network,sshd

reboot

%packages --nobase
@ X Window System
wget
yum
openssh-server
openssh-clients
gcc
gcc-c++
cmake
gcc-gfortran
autoconf
automake
sysstat
numpy
python-matplotlib
pygtk2
python-imaging
python-simplejson
evince
firefox
boost-devel
xorg-x11-xauth
PackageKit-gtk-module
%end

%pre
bootdrive=vda

if [ -f "/dev/$bootdrive" ] ; then
	exec < /dev/tty3 > /dev/tty3
	chvt 3
	echo "ERROR: Drive device does not exist at /dev/$bootdrive!"
	sleep 5
	halt -f
fi

cat >/tmp/kspre.cfg <<CFG
zerombr
bootloader --location=mbr --driveorder=$bootdrive --append="console=ttyS0 nomodeset"
clearpart --all --initlabel
part /boot --ondrive=$bootdrive --fstype ext4 --fsoptions="relatime,nodev" --size=512
part pv.1 --ondrive=$bootdrive --size 1 --grow
volgroup vg0 pv.1
logvol swap --fstype swap --name=swap --vgname=vg0 --size 1024
logvol / --fstype ext4 --fsoptions="noatime,nodiratime,relatime,nodev" --name=root --vgname=vg0 --size=4096 --grow
CFG

%end

%post

%end
